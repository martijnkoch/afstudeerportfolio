<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <meta name="description" content="Back-end">
        <meta property="og:site_name" content="Afstudeerportfolio | Martijn Koch"/>
        <meta property="og:title" content="Back-end | Afstudeerportfolio | Martijn Koch"/>
        <meta property="og:description" content="Back-end"/>
        <meta property="og:url" content="https://my-jigsaw-docs.com/docs/backend"/>
        <meta property="og:image" content="/assets/img/logo.png"/>
        <meta property="og:type" content="website"/>
        <meta name="twitter:image:alt" content="Afstudeerportfolio | Martijn Koch">
        <meta name="twitter:card" content="summary_large_image">
        
        <title>Afstudeerportfolio | Martijn Koch | Back-end</title>

        <link rel="home" href="https://my-jigsaw-docs.com">
        <link rel="icon" href="/favicon.ico">

        
                    <!-- Global site tag (gtag.js) - Google Analytics -->
            <script async src="https://www.googletagmanager.com/gtag/js?id=UA-101208553-3"></script>
            <script>
                window.dataLayer = window.dataLayer || [];
                function gtag(){dataLayer.push(arguments);}
                gtag('js', new Date());

                gtag('config', 'UA-101208553-3');
            </script>
                <link rel="stylesheet" href="/assets/build/css/main.css?id=993c91a90dd8f11ee4aa">
        <link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
            </head>

    <body class="flex flex-col justify-between min-h-screen bg-gray-100 text-gray-800 leading-normal font-sans">
        <!-- Preload -->
<div id="preloder">
    <div class="loader"></div>
</div>        <!-- Header section -->
        <header class="header-section">
            <div class="header-warp">
                <div class="header-social d-flex justify-content-end">
                </div>
                <div class="header-bar-warp d-flex">
                    <!-- site logo -->
                    <a href="/" class="site-logo">
                        <img src="/assets/img/logo-small.png" alt="">
                    </a>
                    <nav class="top-nav-area w-100">
                        <!-- Menu -->
                        <ul class="main-menu primary-menu">
                            <li><a href="/">Leeswijzer</a></li>
                            <li><a href="/document-overview">Documenten</a></li>
                        </ul>
                    </nav>
                </div>
            </div>
        </header>
        <!-- Progress Wrap -->
<div class="progress-wrap">
    <svg class="progress-circle svg-content" width="100%" height="100%" viewBox="-1 -1 102 102">
        <path d="M50,1 a49,49 0 0,1 0,98 a49,49 0 0,1 0,-98" />
    </svg>
</div>        <section class="page-top-section set-bg" data-setbg="/assets/img/bg-6.jpg">
</section>
    <section class="games-single-page">
        <div class="container">
            <div class="row">
                <div class="col-xl-9 col-lg-8 col-md-7 game-single-content document-text">
                    <h1>Backend</h1>
<p>Na overleg met het development team binnen Greenhouse is de keuze aan de backend kant op het PHP framewor <a href="https://laravel.com/">Laravel</a> komen te vallen.
Omdat de backend veel functionaliteiten gaat krijgen is er gekozen voor een groot framework zoals Laravel. Er had gekozen kunnen worden voor een micoframework zoals SlimPhp of Lumen. Deze microframeworks zijn gericht op het maken van een API maar ook met een groter framework als Laravel is dit goed te doen. Tevens is Laravel op moment ook het meest populaire PHP framework (A. Kothari , 2019) en er is veel informatie over te vinden. </p>
<p>Hieronder worden een aantal backend hoofdzaken kort toegelicht met hiervan de bijbehorende code snippets. Voor alle backend code kan de volgende <a href="https://github.com/martijnkoch/Greenhouse/tree/master/backend">Github</a> link worden bezocht.  </p>
<h3>Gebruiker registreren</h3>
<p>De eerste stap in het ontwikkelen van de applicatie was om een nieuwe streamer te registreren. Niet zomaar iedereen kan een account aanmaken en dit zal alleen door een admin kunnen worden gedaan Er is gebruik gemaakt van Laravel passport voor de beveiliging van de applicatie. <a href="https://laravel.com/docs/5.8/passport">Laravel passport</a> zorgt voor Oauth 2 authentication en het is een losse dependency van Laravel met <a href="https://getcomposer.org/">Composer</a> is geinstalleerd. Bij het aanmaken van een nieuwe user wordt een access token meegegeven. Het testen van de API is gedaan door middel van <a href="https://www.getpostman.com/">Postman</a>. </p>
<p><img src="/assets/img/register-user-php.png" alt="" title="Register code" /></p>
<p><img src="/assets/img/register-user.png" alt="" title="Postman" /></p>
<h3>Gebruiker laten inloggen</h3>
<p>Voor de login van de user is wat extra’s nodig om te zorgen voor een match tussen de user zijn access token en de secret key vanuit Laravel password. Naast de tokens heb je nog een andere library nodig om te zorgen dat de login zal werken. Deze library is <a href="http://docs.guzzlephp.org/en/stable/">Guzzle</a> en is een populaire HTTP client.  </p>
<p>Als er een match is tussen de access token en de secret key dan zal er een Bearer token terugkomen. </p>
<p><img src="/assets/img/login-php.png" alt="organogram" title="Login code" /></p>
<p><img src="/assets/img/api-login.png" alt="" title="Postman login" /></p>
<h3>Nieuwe game toevoegen</h3>
<p>Om een nieuwe game toe te voegen, moesten een nieuwe controller en model worden gemaakt. Een game bestaat uit de naam van de game, een image van de game en een ads_count als one to many relation voor het aantal reclames.  </p>
<p>Om een image op te slaan moet het pad naar de image worden opgeslagen in de database en de file zelf wordt opgeslagen in de public storage van Laravel. Zo blijft de database snel en kunnen de images makkelijk worden aangesproken aan de front-end.</p>
<p><img src="/assets/img/image_upload.jpg" alt="organogram" title="Image upload code" /></p>
<h3>Reclame toevoegen</h3>
<p>Een nieuwe reclame toevoegen lijkt veel op het toevoegen van een nieuwe game. Echter moet er hier geen image worden toegevoegd, maar een video file. Onder de rules wordt gekeken of de file wel toegestaan is. Aan de hand van de ingevoerde data wordt de filenaam gegenereerd. Deze krijgt de video game naam, het scenenummer en de naam van de klant. Mocht de klant een nieuwe reclame hebben voor een video game scene, dan kan deze gemakkelijk worden overschreven en ook de streamer hoeft niets goed te zetten in zijn streaming software. Als je Toto als voorbeeld neemt: dan is er dagelijks wel een voetbalwedstrijd en de tekst moet vaak worden vernieuwd. Het is dan alleen een kwestie van de nieuwe te uploaden en de content op de stream past zich vanzelf aan.</p>
<p><img src="/assets/img/laravel-ad.jpg" alt="organogram" title="Reclame code" /></p>
<h3>One to many relation</h3>
<p>Een belangrijk onderdeel van de API is om een one to many relation op te stellen. Zo moet een game meerdere reclames kunnen hebben. Een game heeft meerdere scenario’s wanneer een bepaalde reclame kan worden afgespeeld. In Laravel is het opzetten van een one to many relatie vrij gemakkelijk. In de model van de game kan worden vastgesteld, dat een game meerdere reclames en scènes heeft. </p>
<p><img src="/assets/img/one-to-many.png" alt="organogram" title="One to many" /></p>
<h3>API</h3>
<p>De API heeft verschillende paden. Deze paden kunnen door de front-end worden aangesproken. Vladimir Sidorenko (2017) heeft een Best Practices RESTful API Design guide. Deze guide is gevolgd om de definities van de Api paden aan te duiden. Zo zijn een aantal korte regels voor API paden: </p>
<ul>
<li>Simplicity</li>
<li>Fast performance</li>
<li>Fully-featuring</li>
<li>Reliability</li>
<li>Scalability</li>
</ul>
<p><img src="/assets/img/api-paths.png" alt="organogram" title="Api" /></p>
<h4>Bronnenlijst</h4>
<div class="bronnenlijst">
<p class="bron"> Laravel. Version 6.6.1 [Framework] - The PHP Framework For Web Artisans. (2019) Geraadpleegd van </p><a class="bronlink" target="_blank" href="https://laravel.com/">https://laravel.com/</a>
<p class="bron">
Kothari, A. (2019). Top 7 PHP Frameworks for Better Application Development. Geraadpleegd van</p> <a class="bronlink" target="_blank" href="https://geekflare.com/php-frameworks/">https://geekflare.com/php-frameworks/</a>
<p class="bron">Postman (2019). Version 5.5.4 [Software]. Geraadpleegd van</p> <a class="bronlink" target="_blank" href="https://www.getpostman.com/">https://www.getpostman.com/</a>
<p class="bron">
Laravel Passport. Version 8.0 [Library]. (2019) Geraadpleegd van</p><a class="bronlink" href="https://laravel.com/docs/5.8/passport" target="_blank">https://laravel.com/docs/5.8/passport</a>
<p class="bron"> Composer. Version 1.8.5 [Software]. (2019) Geraadpleegd van</p><a class="bronlink" href="https://getcomposer.org/" target="_blank">https://getcomposer.org/</a>
<p class="bron">
Guzzle, PHP HTTP client. Version 6.5 [Library]. (2019) Geraadpleegd van</p> <a class="bronlink" href="http://docs.guzzlephp.org/en/stable/" target="_blank">http://docs.guzzlephp.org/en/stable/</a>
<p class="bron">
Sidorenko , V. (2017, 1 oktober). RESTful API Design: Best Practices. Geraadpleegd op 31 december 2019, van </p> <a class="bronlink" href="https://gearheart.io/blog/restful-api-design-best-practices/" target="_blank">https://gearheart.io/blog/restful-api-design-best-practices/</a>
</div>                </div>
            </div>
        </div>
    </section>
                <div class="pt-5 pb-5 footer">
    <div class="container">
        <div class="row">
            <div class="col-lg-6 col-xs-12 about-company text-white">
                <h3 class="mb-2">Afstudeerportfolio Martijn Koch</h3>
                <p class="pr-5 text-white-50">Voor <a href="https://www.fontys.nl" target="_blank"> Fontys </a> Hogeschool ICT, in opdracht van <a href="https://www.greenhousegroup.com/">Greenhouse</a>.</p>
                <a href="https://www.facebook.com/martijn.koch.94"><i class="fa fa-facebook-square mr-1"></i></a>
                <a href="https://www.linkedin.com/in/martijn-koch-a1728a62/"><i class="fa fa-linkedin-square"></i></a>
            </div>
            <div class="col-lg-6 col-xs-12 links text-white">
                <h4 class="mt-lg-0 mt-sm-3 mb-2">Links</h4>
                <ul class="m-0 p-0">
                <li>- <a href="/">Leeswijzer</a></li>
                <li>- <a href="/document-overview">Documenten</a></li>
                </ul>
            </div>
        </div>
        <div class="row mt-5">
            <div class="col copyright">
            <p class="text-white">© 2019-2020. All Rights Reserved.</p>
            </div>
        </div>
    </div>
</div>        <script src="/assets/build/js/main.js?id=45c76e898d130991af73"></script>
        <script>
    const navMenu = {
        toggle() {
            const menu = document.getElementById('js-nav-menu');
            menu.classList.toggle('hidden');
            menu.classList.toggle('lg:block');
            document.getElementById('js-nav-menu-hide').classList.toggle('hidden');
            document.getElementById('js-nav-menu-show').classList.toggle('hidden');
        },
    }
</script>
    </body>
</html>